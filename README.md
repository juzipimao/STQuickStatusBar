# ST快速状态栏扩展 (STQuickStatusBar)

## 🎯 简介

ST快速状态栏扩展是专为SillyTavern设计的高级正则表达式工具，旨在简化角色状态栏的创建和管理。通过直观的模态框界面和强大的AI生成功能，让用户能够快速为当前角色添加个性化的状态栏显示规则。

## ✨ 核心功能

### 🔧 手动创建模式
- **可视化正则编辑器**：提供友好的表单界面，无需深入了解正则表达式语法
- **实时验证与预览**：输入时即时验证正则表达式的有效性，并提供测试预览功能
- **多行内容支持**：完全保留用户输入格式，支持复杂的多行正则表达式
- **影响范围控制**：精确控制正则规则作用于用户输入、AI输出或全部内容
- **智能记忆功能**：自动记住上次的输入内容，提升使用效率

### 🤖 AI智能生成
- **多API支持**：
  - **Gemini API**：支持Google Gemini 2.5 Pro模型，提供强大的正则生成能力
  - **自定义OpenAI格式API**：兼容各种OpenAI格式的第三方API服务
- **专业提示工程**：内置专门优化的提示词，确保生成高质量的状态栏正则规则
- **智能内容分析**：自动分析用户需求，生成包含正则表达式、XML格式、示例内容和HTML美化的完整方案
- **对话历史管理**：
  - 支持多轮对话，每次打开工具自动恢复上次对话内容
  - 智能历史存储，最多保存10条历史对话记录
  - 静默后台处理，用户无感的上下文管理

### 💾 配置管理
- **自动保存机制**：
  - API配置实时保存到浏览器本地存储
  - 三层保存架构：localStorage临时缓存 → 内存状态 → SillyTavern全局设置
  - 页面刷新后自动恢复所有配置
- **可视化状态反馈**：实时显示保存状态，"✓ 已保存"或"✗ 保存失败"提示

### 🎨 代码优化
- **智能代码包裹**：点击"应用到手动创建页面"时，自动为替换内容添加markdown代码块包裹
- **内容类型检测**：
  - HTML内容：添加```html包裹
  - 结构化内容：添加```包裹
  - 防重复处理：已有包裹的内容保持原样

### 🖥️ 用户界面
- **现代化设计**：采用渐变背景、玻璃形态效果的现代UI设计
- **响应式布局**：完美适配桌面端和移动端设备
- **主题适配**：自动适配SillyTavern的明暗主题切换
- **流畅动画**：优雅的页面切换和状态变化动画效果

## 🚀 快速开始

### 安装方式

#### 方式一：GitHub扩展安装（推荐）
1. **打开SillyTavern扩展管理**：进入SillyTavern的扩展设置页面
2. **添加扩展仓库**：在扩展管理中点击"安装扩展"
3. **输入仓库地址**：
   ```
   https://github.com/juzipimao/STQuickStatusBar
   ```
4. **自动安装**：SillyTavern会自动下载并安装扩展
5. **启用扩展**：安装完成后启用"ST快速状态栏"扩展

#### 方式二：手动复制安装
1. **下载源码**：从GitHub仓库下载最新版本
2. **复制文件**：将整个`STQuickStatusBar`文件夹复制到SillyTavern的扩展目录：
   ```
   SillyTavern/data/default-user/extensions/STQuickStatusBar/
   ```
3. **重启SillyTavern**：重新启动SillyTavern以加载扩展
4. **启用扩展**：在SillyTavern的扩展设置中找到"ST快速状态栏"并启用


*让每个角色都拥有生动的状态栏展示！🎭*
